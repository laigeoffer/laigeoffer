(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{330:function(t,_,v){"use strict";v.r(_);var r=v(7),e=Object(r.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"架构选型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#架构选型"}},[t._v("#")]),t._v(" 架构选型")]),t._v(" "),_("p",[t._v("PmHub 开源项目一共经历了 2 次技术架构选型，因为一开始它是个单体 SpringBoot 版本应用，其采用 "),_("strong",[t._v("SOA 模块化")]),t._v("架构设计，即按照不同的业务范围分不同的 Moudle，这也是单体应用中现在常见的设计思路。")]),t._v(" "),_("p",[t._v("后面我把他升级到了"),_("strong",[t._v("微服务")]),t._v("版本，架构复杂性自然也飙升了一截。需要考虑服务网关、服务调用、服务认证、服务注册、熔断降级、监控及分布式事务等一系列问题。")]),t._v(" "),_("p",[t._v("经过慎重的思考和架构选型，最终确定如下系统架构：")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/laigeoffer-pmhub-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%9B%BE.png",alt:"laigeoffer-pmhub-系统架构图"}})]),t._v(" "),_("p",[t._v("服务中使用到的一些后端技术列表如下：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th"),t._v(" "),_("th",[t._v("技术")]),t._v(" "),_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("版本")]),t._v(" "),_("th",[t._v("官网")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("1")]),t._v(" "),_("td",[t._v("Spring Boot")]),t._v(" "),_("td",[t._v("基础框架")]),t._v(" "),_("td",[t._v("2.7.18")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://spring.io/projects/spring-boot",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://spring.io/projects/spring-boot"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("2")]),t._v(" "),_("td",[t._v("SpringCloud")]),t._v(" "),_("td",[t._v("微服务框架")]),t._v(" "),_("td",[t._v("2021.0.8")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://spring.io/projects/spring-cloud",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://spring.io/projects/spring-cloud"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("3")]),t._v(" "),_("td",[t._v("SpringCloud Alibaba")]),t._v(" "),_("td",[t._v("阿里微服务框架")]),t._v(" "),_("td",[t._v("2021.0.5.0")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://github.com/alibaba/spring-cloud-alibaba",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/alibaba/spring-cloud-alibaba"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("4")]),t._v(" "),_("td",[t._v("SpringCloud Gateway")]),t._v(" "),_("td",[t._v("服务网关")]),t._v(" "),_("td",[t._v("3.1.8")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://spring.io/projects/spring-cloud-gateway",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://spring.io/projects/spring-cloud-gateway"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("5")]),t._v(" "),_("td",[t._v("MyBatis-Plus")]),t._v(" "),_("td",[t._v("持久层框架")]),t._v(" "),_("td",[t._v("3.5.1")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://baomidou.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://baomidou.com"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("6")]),t._v(" "),_("td",[t._v("Redis")]),t._v(" "),_("td",[t._v("分布式缓存数据库")]),t._v(" "),_("td",[t._v("Latest")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://redis.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://redis.io"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("7")]),t._v(" "),_("td",[t._v("RocketMQ")]),t._v(" "),_("td",[t._v("消息队列")]),t._v(" "),_("td",[t._v("2.2.3")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://rocketmq.apache.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://rocketmq.apache.org"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("8")]),t._v(" "),_("td",[t._v("HuTool")]),t._v(" "),_("td",[t._v("小而全的工具集项目")]),t._v(" "),_("td",[t._v("5.8.11")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://hutool.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hutool.cn"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("9")]),t._v(" "),_("td",[t._v("Maven")]),t._v(" "),_("td",[t._v("项目构建管理")]),t._v(" "),_("td",[t._v("3.9.1")]),t._v(" "),_("td",[_("a",{attrs:{href:"http://maven.apache.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://maven.apache.org"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("10")]),t._v(" "),_("td",[t._v("Sentinel")]),t._v(" "),_("td",[t._v("流控防护框架")]),t._v(" "),_("td",[t._v("1.8.6")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://github.com/alibaba/Sentinel",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/alibaba/Sentinel"),_("OutboundLink")],1)])])])]),t._v(" "),_("p",[t._v("明确了项目最终使用的技术架构选型，你是否好奇我是如何做技术架构选型的呢？下面浅谈一些自己的经验。")]),t._v(" "),_("h2",{attrs:{id:"明确业务需求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#明确业务需求"}},[t._v("#")]),t._v(" 明确业务需求")]),t._v(" "),_("p",[t._v("业务项目一定是用来"),_("strong",[t._v("满足业务需求")]),t._v("的，而技术架构是为了更好更"),_("strong",[t._v("高效")]),t._v("的完成业务项目，所以业务需求是技术架构选型中"),_("strong",[t._v("最为关键")]),t._v("的一步，直接决定了技术选型的方向和重点。")]),t._v(" "),_("p",[t._v("一般公司业务，需要了解公司所在"),_("strong",[t._v("行业的现状")]),t._v("、趋势和竞争态势。例如，电商、金融、医疗等不同领域的需求和侧重点会有所不同。")]),t._v(" "),_("p",[t._v("还要理解"),_("strong",[t._v("业务模式")]),t._v("，明确公司的业务模式， 是B2B、B2C 还是 C2C 等，这会影响系统的设计和功能需求。")]),t._v(" "),_("p",[t._v("拿 PmHub 为例，因为我们是开源项目，业务比较简单，主要是项目管理和流程管理相结合。那需要深入理解业务，还要从业务目标和功能需求入手。")]),t._v(" "),_("h2",{attrs:{id:"分析业务目标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分析业务目标"}},[t._v("#")]),t._v(" 分析业务目标")]),t._v(" "),_("p",[t._v("业务目标大体为为"),_("strong",[t._v("长期目标")]),t._v("和"),_("strong",[t._v("短期目标")]),t._v("，长期目标是公司在未来3-5年内的战略规划是什么？如扩展国际市场、推出新产品等。")]),t._v(" "),_("p",[t._v("而短期目标是公司在短期内希望通过技术实现哪些目标？如提高销售、用户增长、提升用户体验等。")]),t._v(" "),_("p",[t._v("拿 PmHub 来说，短期目标是能尽快实现"),_("strong",[t._v("微服务改造")]),t._v("落地，并能闭环现有所有业务功能，长期目标，是能更好的"),_("strong",[t._v("帮助学生将此项目写入简历，帮助他们拿到一个好的 offer")]),t._v("。")]),t._v(" "),_("h2",{attrs:{id:"确定功能需求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#确定功能需求"}},[t._v("#")]),t._v(" 确定功能需求")]),t._v(" "),_("p",[t._v("功能可以分为基本功能和非功能需求。")]),t._v(" "),_("h4",{attrs:{id:"基本功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基本功能"}},[t._v("#")]),t._v(" 基本功能")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("核心功能")]),t._v("：定义系统必须实现的核心功能，如用户注册登录、产品展示、购物车、订单处理等。")]),t._v(" "),_("li",[_("strong",[t._v("辅助功能")]),t._v("：定义增强用户体验的辅助功能，如推荐系统、优惠券、用户评价等。")])]),t._v(" "),_("h4",{attrs:{id:"非功能需求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#非功能需求"}},[t._v("#")]),t._v(" 非功能需求")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("性能要求")]),t._v("：定义系统在响应时间、吞吐量、并发用户数等方面的性能指标。例如，页面加载时间不超过2秒，支持每秒1000次交易等。")]),t._v(" "),_("li",[_("strong",[t._v("安全要求")]),t._v("：定义系统的安全需求，如数据加密、身份验证、权限管理、漏洞防护等。")]),t._v(" "),_("li",[_("strong",[t._v("可用性要求")]),t._v("：定义系统的可用性指标，如99.9%的系统可用率、故障恢复时间等。")]),t._v(" "),_("li",[_("strong",[t._v("扩展性要求")]),t._v("：定义系统的扩展性需求，以便未来能轻松添加新功能或处理更多用户。")])]),t._v(" "),_("p",[t._v("PmHub 这个项目的基本功能是一套完整的 CRM 系统，而核心业务功能是"),_("strong",[t._v("项目管理")]),t._v("和"),_("strong",[t._v("流程管控")]),t._v("，其他的如日志管理、系统管理等均属于辅助功能。")]),t._v(" "),_("h2",{attrs:{id:"技术分析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#技术分析"}},[t._v("#")]),t._v(" 技术分析")]),t._v(" "),_("p",[t._v("下图是典型的技术架构选型图：")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/Technology-architecture-core-technology.webp",alt:"Technology-architecture-core-technology"}})]),t._v(" "),_("p",[t._v("所以大部分情况下，在做技术分析的时候大体也需要围绕经典技术架构来做分析和选型。")]),t._v(" "),_("h2",{attrs:{id:"考察技术栈"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#考察技术栈"}},[t._v("#")]),t._v(" 考察技术栈")]),t._v(" "),_("p",[t._v("对于不同的场景，需要至少罗列 2 种以上技术栈，并需要分析其之间的优缺点和适用场景，如果是在公司团队，还需要评估现有团队的"),_("strong",[t._v("技术能力")]),t._v("和"),_("strong",[t._v("学习曲线")]),t._v("。")]),t._v(" "),_("p",[t._v("如果是个人，需要看哪个技术是"),_("strong",[t._v("自己擅长的")]),t._v("， 或者"),_("strong",[t._v("学习成本低的")]),t._v("，我们在做技术选型的时候，并不是完全会选择那些很时髦的但没经过验证的技术，也大概率不会选择自己不熟悉的技术。")]),t._v(" "),_("p",[t._v("真要选择这种自己不熟悉的技术，一定是要先去学习这个技术才行的。")]),t._v(" "),_("p",[t._v("拿 PmHub 中的用户鉴权来举例，现成的技术框架有 Spring Security 和 Shiro 完全可以实现我的需求，且我对这两个技术也比较熟悉，所以在 monitor  监控中心的鉴权，我就直接用了 Spring Security。")]),t._v(" "),_("p",[t._v("而微服务的整体鉴权，我却选择了自定义注解配合网关鉴权，其实是有目的的，因为该项目的长期目标是帮助学生体现在简历上，所以需要"),_("strong",[t._v("增加亮点")]),t._v("，")]),t._v(" "),_("p",[t._v("另外通过自己实现鉴权，也能更加理解鉴权框架的内部原理了，其实都差不多的。")]),t._v(" "),_("h2",{attrs:{id:"可扩展性和性能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#可扩展性和性能"}},[t._v("#")]),t._v(" 可扩展性和性能")]),t._v(" "),_("p",[t._v("选择技术选型的时候，需要选择能够支持业务增长的架构，而且确保所选技术能够满足性能需求，例如高并发、低延迟等。")]),t._v(" "),_("h2",{attrs:{id:"安全性和可靠性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安全性和可靠性"}},[t._v("#")]),t._v(" 安全性和可靠性")]),t._v(" "),_("p",[t._v("选择技术框架是必须满足安全性和可靠性，一些有严重漏洞的框架，我们是坚决不会选的。")]),t._v(" "),_("ul",[_("li",[t._v("确保技术架构符合行业安全标准和法规要求。")]),t._v(" "),_("li",[t._v("评估技术的可靠性，避免单点故障。")])]),t._v(" "),_("h2",{attrs:{id:"架构设计原则"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#架构设计原则"}},[t._v("#")]),t._v(" 架构设计原则")]),t._v(" "),_("h3",{attrs:{id:"模块化和分层设计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#模块化和分层设计"}},[t._v("#")]),t._v(" 模块化和分层设计")]),t._v(" "),_("ul",[_("li",[t._v("采用模块化设计，确保系统的可维护性和可扩展性。")]),t._v(" "),_("li",[t._v("使用分层架构，例如MVC模式，明确各层的职责。")])]),t._v(" "),_("h3",{attrs:{id:"松耦合和高内聚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#松耦合和高内聚"}},[t._v("#")]),t._v(" 松耦合和高内聚")]),t._v(" "),_("ul",[_("li",[t._v("保持各组件之间的松耦合，减少相互依赖。")]),t._v(" "),_("li",[t._v("确保每个模块内部具有高内聚性，实现特定功能。")])]),t._v(" "),_("h2",{attrs:{id:"资源评估"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#资源评估"}},[t._v("#")]),t._v(" 资源评估")]),t._v(" "),_("p",[t._v("设计架构的时候，需要考虑实际的资源成本，考虑开发和部署的初始成本，包括硬件、软件和人力成本。评估长期运营和维护成本，例如服务器费用、第三方服务费用等。")]),t._v(" "),_("p",[t._v("比如在 PmHub 中，文件存储，我就没使用阿里云存储 OSS，而是自己实现了一套"),_("strong",[t._v("分布式文件存储系统")]),t._v("，主要还是为了节省成本。")]),t._v(" "),_("p",[t._v("做架构设计是一件复杂的事情，有人觉得这是架构师该做的事情，但其实我觉得，架构设计是每一个开发都必须掌握的技能，通过架构设计，我们才明白我们做的系统究竟如何"),_("strong",[t._v("体现价值")]),t._v("。")]),t._v(" "),_("p",[t._v("以上是关于技术架构选型的一些个人经验。")]),t._v(" "),_("h2",{attrs:{id:"前端技术架构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前端技术架构"}},[t._v("#")]),t._v(" 前端技术架构")]),t._v(" "),_("p",[t._v("服务中使用到的前端技术列表如下：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th"),t._v(" "),_("th",[t._v("技术")]),t._v(" "),_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("版本")]),t._v(" "),_("th",[t._v("官网")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("1")]),t._v(" "),_("td",[t._v("JS 框架")]),t._v(" "),_("td",[t._v("Vuejs")]),t._v(" "),_("td",[t._v("2.6.12")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://cn.vuejs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("  https://cn.vuejs.org"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("2")]),t._v(" "),_("td",[t._v("UI 框架")]),t._v(" "),_("td",[t._v("element-ui")]),t._v(" "),_("td",[t._v("2.15.10")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://element.eleme.cn/2.0/#/zh-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://element.eleme.cn/2.0/#/zh-CN"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("3")]),t._v(" "),_("td",[t._v("Ajax 请求")]),t._v(" "),_("td",[t._v("Axios")]),t._v(" "),_("td",[t._v("0.24.0")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://axios-http.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://axios-http.com/"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("4")]),t._v(" "),_("td",[t._v("前端路由")]),t._v(" "),_("td",[t._v("Vue-router")]),t._v(" "),_("td",[t._v("3.4.9")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://router.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://router.vuejs.org/"),_("OutboundLink")],1)])]),t._v(" "),_("tr",[_("td",[t._v("5")]),t._v(" "),_("td",[t._v("前端脚手架")]),t._v(" "),_("td",[t._v("Vue-cli")]),t._v(" "),_("td",[t._v("5.0.8")]),t._v(" "),_("td",[_("a",{attrs:{href:"https://cli.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cli.vuejs.org/"),_("OutboundLink")],1)])])])])])}),[],!1,null,null,null);_.default=e.exports}}]);