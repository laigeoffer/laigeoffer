(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{343:function(s,n,a){"use strict";a.r(n);var t=a(4),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("🚀 如何把PmHub项目“吃透”？")]),s._v(" "),n("p",[s._v("如果你正在为校招面试做准备，面临着简历上项目泛滥、都是“烂大街”项目，面试机会较少，或者希望将 PmHub 项目充实到简历中等问题，欢迎加入"),n("a",{attrs:{href:"https://laigeoffer.cn/pages/8429d9/",target:"_blank",rel:"noopener noreferrer"}},[s._v("来个 offer 编程星球"),n("OutboundLink")],1),s._v("。我们提供以下主要服务：")]),s._v(" "),n("p",[s._v("1、"),n("strong",[n("span",{staticStyle:{color:"red"}},[s._v("付费文档")])]),s._v("：PmHub、技术派等热门项目配套的120+篇付费文档永久查看权限")]),s._v(" "),n("p",[s._v("2、"),n("strong",[n("span",{staticStyle:{color:"red"}},[s._v("面试指南")])]),s._v("：校招、社招的 40 万+字面试求职攻略")]),s._v(" "),n("p",[s._v("3、"),n("strong",[n("span",{staticStyle:{color:"red"}},[s._v("专属问答")])]),s._v("：向我们 1v1 发起提问，内容不限于 offer 选择、学习路线、职业规划等")]),s._v(" "),n("p",[s._v("4、"),n("strong",[n("span",{staticStyle:{color:"red"}},[s._v("简历修改")])]),s._v("：提供简历修改服务，附赠星球 100+优质简历模板,以及提供将 PmHub、技术派项目如何写到简历指南。")]),s._v(" "),n("p",[s._v("5、"),n("strong",[n("span",{staticStyle:{color:"red"}},[s._v("学习环境")])]),s._v("：打造一个沉浸式的学习环境，有一种高考冲刺、大学考研的氛围。")]),s._v(" "),n("br"),s._v(" "),n("p",[s._v("欢迎加入「来个 offer」编程星球，助你在校招中脱颖而出！")])]),s._v(" "),n("h2",{attrs:{id:"nginx是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx是什么"}},[s._v("#")]),s._v(" Nginx是什么")]),s._v(" "),n("p",[s._v("Nginx是一款高性能、轻量级的Web服务器软件，同时也可以作为反向代理服务器、负载均衡器和HTTP缓存器。它由俄罗斯程序员 Igor Sysoev 开发，最初是为了满足 Rambler.ru 站点的需求而设计的，后流行应用于反向代理和负债均衡以及解决跨域问题。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("为什么Nginx这么强？")]),s._v(" "),n("p",[s._v("Nginx是一个 轻量级/高性能的反向代理Web服务器，它是由C语言写的，所以速度非常快、性能非常优秀。它的主要功能就是反向代理、负载均衡、配置SSL证书、防盗链、解决跨域问题、缓存、限流、动静资源分离等等。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/Nginx%E4%BB%8B%E7%BB%8D.png",alt:"关于Nginx"}})]),s._v(" "),n("h2",{attrs:{id:"为什么要用nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为什么要用nginx"}},[s._v("#")]),s._v(" 为什么要用Nginx")]),s._v(" "),n("p",[s._v("Nginx 是一款高性能的 Web 服务器，它具有以下优点：")]),s._v(" "),n("ul",[n("li",[s._v("轻量级：Nginx 只占用很低的内存和 CPU 资源，性能非常优秀。")]),s._v(" "),n("li",[s._v("支持热部署：Nginx 支持热部署，可以不停止服务就更新配置文件，或者重新加载配置文件。")]),s._v(" "),n("li",[s._v("支持高并发：Nginx 支持高并发，能够处理数以万计的并发请求。")]),s._v(" "),n("li",[s._v("支持负载均衡：Nginx 支持负载均衡，可以将请求分发到多个服务器上，提高系统的处理能力。")]),s._v(" "),n("li",[s._v("支持反向代理：Nginx 支持反向代理，可以作为代理服务器使用，将请求转发到后端的服务器上，从而实现负载均衡和缓存功能。")]),s._v(" "),n("li",[s._v("支持缓存：Nginx 支持缓存，可以将静态文件缓存起来，提高网站的访问速度。")]),s._v(" "),n("li",[s._v("支持安全防护：Nginx 支持安全防护，可以防止一些常见的攻击，如 SQL 注入、跨站脚本攻击等。")]),s._v(" "),n("li",[s._v("支持模块化设计：Nginx 采用模块化设计，可以根据需要选择不同的模块，从而实现不同的功能。")]),s._v(" "),n("li",[s._v("支持多种语言：Nginx 支持多种语言，如 PHP、Python、Java 等，可以方便地集成各种编程语言。")]),s._v(" "),n("li",[s._v("支持多种操作系统：Nginx 支持多种操作系统，如 Linux、Windows、MacOS 等，可以方便地部署到不同的操作系统上。")])]),s._v(" "),n("p",[s._v("PmHub 的服务端口需要做反向代理，以及需要处理跨域问题，而且需要进行域名解析映射，因此需要使用 Nginx 来进行配置。就比如访问我们的体验地址："),n("a",{attrs:{href:"https://pmhub.laigeoffer.cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://pmhub.laigeoffer.cn"),n("OutboundLink")],1),s._v(",这里我们就是通过 Nginx 来进行配置的。")]),s._v(" "),n("h2",{attrs:{id:"下载nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载nginx"}},[s._v("#")]),s._v(" 下载Nginx")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("进入下载地址：http://nginx.org/en/download.html")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/20240611144721.png",alt:"Nginx官网"}})]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("查看所有历史版本，地址：\n"),n("a",{attrs:{href:"http://nginx.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://nginx.org/download/"),n("OutboundLink")],1)])]),s._v(" "),n("h2",{attrs:{id:"云服务器安装nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#云服务器安装nginx"}},[s._v("#")]),s._v(" 云服务器安装Nginx")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install nginx")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果使用yum install xxxx，会找到安装包之后，询问你Is this OK[y/d/N]，需要你手动进行选择。但是如果加上参数-y，就会自动选择y，不需要你再手动选择！")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看Nginx版本号")]),s._v("\nnginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看安装的所有 Nginx 包")]),s._v("\nyum list "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 Nginx 安装相关的文件位置信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" nginx\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("Nginx 目录结构")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/20240611145157.png",alt:"Nginx 目录结构"}})]),s._v(" "),n("h2",{attrs:{id:"nginx-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置"}},[s._v("#")]),s._v(" Nginx 配置")]),s._v(" "),n("p",[s._v("进入默认安装路径：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/nginx/\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("找到 nginx.conf")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/20240611150738.png",alt:"nginx.conf"}})]),s._v(" "),n("p",[s._v("修改成如下配置，注意先备份一下原先的文件，防止错误操作。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" nginx.conf nginx.conf.bak\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("user www-data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nworker_processes auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\npid /run/nginx.pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ninclude /etc/nginx/modules-enabled/*.conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nevents "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        worker_connections "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("768")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# multi_accept on;")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nhttp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Basic Settings")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n\n        sendfile on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        tcp_nopush on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        types_hash_max_size "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server_tokens off;")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server_names_hash_bucket_size 64;")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server_name_in_redirect off;")]),s._v("\n\n        include /etc/nginx/mime.types"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        default_type application/octet-stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SSL Settings")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Dropping SSLv3, ref: POODLE")]),s._v("\n        ssl_prefer_server_ciphers on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Logging Settings")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n\n        access_log /var/log/nginx/access.log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        error_log /var/log/nginx/error.log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Gzip Settings")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gzip_vary on;")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gzip_proxied any;")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gzip_comp_level 6;")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gzip_buffers 16 8k;")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gzip_http_version 1.1;")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Virtual Host Configs")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n\n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加自定义配置文件，用于配置我们自己的域名（导入的自定义配置文件是有先后顺序的）")]),s._v("\n        include /etc/nginx/vhosts/*.conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("       \n\n        include /etc/nginx/conf.d/*.conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        include /etc/nginx/sites-enabled/*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br")])]),n("p",[s._v("这里的关键是开启 SSL，以及引入外部配置文件。因为实际项目中，会有很多的系统，每一个系统的配置文件，我们都可以单独抽离出来，放在单独的文件夹下。")]),s._v(" "),n("p",[s._v("这里我建了一个 vhosts 文件夹，用于存放我们所有的自定义配置文件。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/20240611151347.png",alt:"vhosts文件夹"}})]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /etc/nginx/vhosts\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然后，我们新建一个配置文件，比如：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/nginx/vhosts/example.com.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        server_name example.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("这里我们直接贴出 PmHub 的 Nginx 配置。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("因为我绑定了域名并开启了 SSL，所以这里需要配置一下 SSL 证书。如果你没有域名也可以不配置。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下属性中，以ssl开头的属性表示与证书配置有关。")]),s._v("\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置HTTPS的默认访问端口为443。")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果未在此处配置HTTPS的默认访问端口，可能会造成Nginx无法启动。")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果您使用Nginx 1.15.0及以上版本，请使用listen 443 ssl代替listen 443和ssl on。")]),s._v("\n    listen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 填写绑定证书的域名")]),s._v("\n    server_name pmhub.laigeoffer.cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 证书文件名称")]),s._v("\n    ssl_certificate 这里是存放证书文件的位置"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 私钥文件名称")]),s._v("\n    ssl_certificate_key 这里是存放证书文件的位置"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定客户端可以重用会话参数的时间（超时之后不可使用）")]),s._v("\n    ssl_session_timeout 5m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 表示使用的加密套件的类型")]),s._v("\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("NULL:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("aNULL:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("MD5:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("ADH:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("RC4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 表示使用的TLS协议的类型，您需要自行评估是否配置TLSv1.1协议。")]),s._v("\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置协商加密算法时，优先使用我们服务端的加密套件，而不是客户端浏览器的加密套件。")]),s._v("\n    ssl_prefer_server_ciphers on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Web网站程序存放目录")]),s._v("\n         root   你的项目下载位置/pmhub/docker/nginx/html/dist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         index  index.html index.htm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         try_files "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /index.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置反向代理")]),s._v("\n      location /prod-api/ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        proxy_set_header Host "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_host")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        proxy_set_header X-Real-IP "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        proxy_set_header REMOTE-HOST "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        proxy_set_header X-Forwarded-For "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$proxy_add_x_forwarded_for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        proxy_pass http://localhost:6880/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("p",[s._v("具体流程图如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.tobebetterjavaer.com/stutymore/Nginx%E6%B5%81%E7%A8%8B.png",alt:"Nginx流程图"}})]),s._v(" "),n("h2",{attrs:{id:"检查配置是否正确"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检查配置是否正确"}},[s._v("#")]),s._v(" 检查配置是否正确")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、检查配置是否正确")]),s._v("\nnginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、使配置生效")]),s._v("\nnginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"启动nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动nginx"}},[s._v("#")]),s._v(" 启动Nginx")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\nsystemctl start nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看Nginx状态")]),s._v("\nsystemctl status nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询Nginx进程：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ef")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\n查看进程id\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" pid\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("这样就配置启动完成了，也是部署中最为核心的一个环节，如果有问题，可以在知识星球发个帖子或者向我发起提问，掌握了上线部署流程，是很有帮助的，现在面试没上线的项目，面试官基本不看了。")])])}),[],!1,null,null,null);n.default=e.exports}}]);